import{i as b,r,a as w,j as e,B as c,S as R,I as f,F as O,f as y}from"./index-D0FyutOn.js";import{C as d,c as x,a as u,b as h}from"./card-C7X9d_pw.js";import{D}from"./download-BKErva0v.js";import{S as $,T as G}from"./trash-2-Xo58w84t.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],V=b("folder",K);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],F=b("share-2",Z);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],U=b("upload",J);function ee(){const[o,z]=r.useState([]),[L,P]=r.useState(!0),[M,j]=r.useState(!1),[p,_]=r.useState(""),[g,B]=r.useState("all"),[v,C]=r.useState(!1),[a,i]=r.useState({title:"",description:"",category:"",tags:"",isPublic:!1}),[m,k]=r.useState(null);r.useEffect(()=>{N()},[]);const N=async()=>{try{const s=await w.get("/documents");z(s)}catch(s){console.error("Error fetching documents:",s)}finally{P(!1)}},E=async()=>{if(!m)return;C(!0);const s=new FormData;s.append("file",m),s.append("title",a.title),s.append("description",a.description),s.append("category",a.category),s.append("tags",a.tags),s.append("isPublic",a.isPublic.toString());try{await w.post("/documents/upload",s),i({title:"",description:"",category:"",tags:"",isPublic:!1}),k(null),j(!1),N()}catch(t){console.error("Error uploading document:",t)}finally{C(!1)}},A=async(s,t)=>{try{const n=window.URL.createObjectURL(new Blob(["Mock file content"],{type:"text/plain"})),l=document.createElement("a");l.href=n,l.setAttribute("download",t),document.body.appendChild(l),l.click(),l.remove()}catch(n){console.error("Error downloading document:",n)}},T=async s=>{if(window.confirm("Are you sure you want to delete this document?"))try{await w.delete(),N()}catch(t){console.error("Error deleting document:",t)}},S=s=>{if(s===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,l)).toFixed(2))+" "+n[l]},I=s=>!s||s.includes("pdf")?"📄":s.includes("doc")?"📝":s.includes("xls")?"📊":s.includes("ppt")?"📈":s.includes("image")?"🖼️":"📄",q=(o||[]).filter(s=>{const t=(s.title||"").toLowerCase().includes(p.toLowerCase())||(s.description||"").toLowerCase().includes(p.toLowerCase())||(s.tags||[]).some(l=>l.toLowerCase().includes(p.toLowerCase())),n=g==="all"||s.category===g;return t&&n}),H=[...new Set((o||[]).map(s=>s.category||"Uncategorized"))];return L?e.jsx("div",{className:"text-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Document Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Organize and share project documents"})]}),e.jsxs(c,{onClick:()=>j(!0),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]}),e.jsx(d,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(f,{placeholder:"Search documents...",value:p,onChange:s=>_(s.target.value),className:"pl-10"})]}),e.jsxs("select",{className:"p-2 border rounded",value:g,onChange:s=>B(s.target.value),"aria-label":"Filter by category",children:[e.jsx("option",{value:"all",children:"All Categories"}),H.map(s=>e.jsx("option",{value:s,children:s},s))]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(d,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Documents"}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(o||[]).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All uploaded files"})]})]}),e.jsxs(d,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Size"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:S((o||[]).reduce((s,t)=>s+(t.fileSize||0),0))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Storage used"})]})]}),e.jsxs(d,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Public Documents"}),e.jsx(F,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(o||[]).filter(s=>s.isPublic).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shared with team"})]})]}),e.jsxs(d,{children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:"Total Downloads"}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(o||[]).reduce((s,t)=>s+(t.downloadCount||0),0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"File downloads"})]})]})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(h,{children:"Documents"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:q.map(s=>e.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-2xl",children:I(s.fileType)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:s.title||"Untitled Document"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"No description"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:S(s.fileSize||0)}),e.jsx(y,{variant:"outline",children:s.category||"Uncategorized"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.uploadedAt?new Date(s.uploadedAt).toLocaleDateString():"Unknown date"}),s.isPublic&&e.jsx(y,{className:"bg-green-100 text-green-800",children:"Public"})]}),(s.tags||[]).length>0&&e.jsx("div",{className:"flex space-x-1 mt-1",children:(s.tags||[]).map((t,n)=>e.jsx(y,{variant:"secondary",className:"text-xs",children:t},n))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.downloadCount||0," downloads"]}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>A(s._id,s.fileName||"document"),children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{},children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>{},children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>T(s._id),children:e.jsx(G,{className:"w-4 h-4"})})]})]},s._id))})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-background p-6 rounded-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Upload Document"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{placeholder:"Document Title",value:a.title,onChange:s=>i({...a,title:s.target.value})}),e.jsx("textarea",{className:"w-full p-2 border rounded",placeholder:"Description",value:a.description,onChange:s=>i({...a,description:s.target.value}),rows:3}),e.jsx(f,{placeholder:"Category",value:a.category,onChange:s=>i({...a,category:s.target.value})}),e.jsx(f,{placeholder:"Tags (comma separated)",value:a.tags,onChange:s=>i({...a,tags:s.target.value})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:a.isPublic,onChange:s=>i({...a,isPublic:s.target.checked})}),e.jsx("label",{htmlFor:"isPublic",children:"Make document public"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[e.jsx("input",{type:"file",onChange:s=>k(s.target.files?.[0]||null),className:"hidden",id:"file-upload"}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(U,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m?m.name:"Click to select file"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{onClick:E,className:"flex-1",disabled:!m||v,children:v?"Uploading...":"Upload"}),e.jsx(c,{variant:"outline",onClick:()=>j(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})}export{ee as default};
