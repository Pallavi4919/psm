import{r as i,a as m,j as e,B as n,D as E,c as T,d as M,e as p,f as z,U as L,C as B,g as U,T as V,h as _}from"./index-D0FyutOn.js";import{C as F,a as $,b as A,c as O}from"./card-C7X9d_pw.js";import{P as R}from"./progress-l33qeSLu.js";import{T as H,a as I,b as g,c as j}from"./tabs-D8dsfIBp.js";import{P as J}from"./plus-Cy-egXkT.js";import{E as G}from"./ellipsis-C-_JGGLj.js";const N=[{id:"1",name:"Sarah Johnson"},{id:"2",name:"Mike Chen"},{id:"3",name:"Emily Davis"}],b=["planning","active","on-hold","completed"],w={name:"",description:"",manager:"",startDate:"",endDate:"",budget:"",status:"planning"};function ee(){const[D,u]=i.useState(!1),[d,x]=i.useState({open:!1}),[l,v]=i.useState({open:!1}),[c,h]=i.useState({open:!1}),[t,r]=i.useState(w),[C,o]=i.useState([]),[y,f]=i.useState("overview");i.useEffect(()=>{m.get("/programs").then(s=>o(s)).catch(console.error)},[]);const S=async()=>{try{const s=await m.post("/programs",t);o(a=>[...a,s]),r(w),u(!1)}catch{alert("Failed to create program")}},k=async()=>{try{if(!d.program)return;await m.put(`/programs/${d.program._id}`,t),o(s=>s.map(a=>a._id===d.program._id?{...a,...t}:a)),x({open:!1})}catch{alert("Failed to update program")}},P=async()=>{try{if(!c.program)return;await m.delete(),o(s=>s.filter(a=>a._id!==c.program._id)),h({open:!1})}catch{alert("Failed to delete program")}},q=({program:s})=>e.jsxs(F,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(A,{className:"text-lg",children:s.name||"Unnamed Program"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"No description"})]}),e.jsxs(E,{children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",children:e.jsx(G,{className:"w-4 h-4"})})}),e.jsxs(M,{align:"end",children:[e.jsx(p,{onClick:()=>{v({open:!0,program:s}),f("overview")},children:"View Details"}),e.jsx(p,{onClick:()=>{r({name:s.name||"",description:s.description||"",manager:s.manager||"",startDate:s.startDate||"",endDate:s.endDate||"",budget:String(s.budget||0),status:s.status||"planning"}),x({open:!0,program:s})},children:"Edit Program"}),e.jsx(p,{className:"text-red-600",onClick:()=>h({open:!0,program:s}),children:"Delete"})]})]})]})}),e.jsxs(O,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(z,{variant:s.status||"planning",children:s.status||"planning"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Manager: ",s.manager||"Not assigned"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[s.startDate?new Date(s.startDate).toLocaleDateString():"Not set"," ","-"," ",s.endDate?new Date(s.endDate).toLocaleDateString():"Not set"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["$",(s.spent||0).toLocaleString()," / $",(s.budget||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[(s.projects||[]).length," projects"]})]}),(s.risks||[]).length>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-600",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsxs("span",{children:[(s.risks||[]).length," risks"]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(R,{value:s.budget>0?(s.spent||0)/s.budget*100:0,className:"h-2"})})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Programs"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage strategic programs and their associated projects"})]}),e.jsxs(n,{onClick:()=>u(!0),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"New Program"]})]}),D&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Program"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),S()},className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Name",value:t.name,onChange:s=>r(a=>({...a,name:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Description",value:t.description,onChange:s=>r(a=>({...a,description:s.target.value})),required:!0}),e.jsxs("select",{className:"w-full border rounded p-2",value:t.manager,onChange:s=>r(a=>({...a,manager:s.target.value})),required:!0,"aria-label":"Manager",children:[e.jsx("option",{value:"",children:"Select Manager"}),N.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Start Date",value:t.startDate,onChange:s=>r(a=>({...a,startDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"End Date",value:t.endDate,onChange:s=>r(a=>({...a,endDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Budget",value:t.budget,onChange:s=>r(a=>({...a,budget:s.target.value})),required:!0}),e.jsx("select",{className:"w-full border rounded p-2",value:t.status,onChange:s=>r(a=>({...a,status:s.target.value})),required:!0,"aria-label":"Status",children:b.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:"submit",className:"flex-1",children:"Create"}),e.jsx(n,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>u(!1),children:"Cancel"})]})]})]})}),d.open&&d.program&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Program"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),k()},className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Name",value:t.name,onChange:s=>r(a=>({...a,name:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Description",value:t.description,onChange:s=>r(a=>({...a,description:s.target.value})),required:!0}),e.jsxs("select",{className:"w-full border rounded p-2",value:t.manager,onChange:s=>r(a=>({...a,manager:s.target.value})),required:!0,"aria-label":"Manager",children:[e.jsx("option",{value:"",children:"Select Manager"}),N.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Start Date",value:t.startDate,onChange:s=>r(a=>({...a,startDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"End Date",value:t.endDate,onChange:s=>r(a=>({...a,endDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Budget",value:t.budget,onChange:s=>r(a=>({...a,budget:s.target.value})),required:!0}),e.jsx("select",{className:"w-full border rounded p-2",value:t.status,onChange:s=>r(a=>({...a,status:s.target.value})),required:!0,"aria-label":"Status",children:b.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:"submit",className:"flex-1",children:"Save"}),e.jsx(n,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>x({open:!1}),children:"Cancel"})]})]})]})}),l.open&&l.program&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Program Details"}),e.jsxs(H,{value:y,onValueChange:f,className:"mb-4",children:[e.jsxs(I,{children:[e.jsx(g,{value:"overview",children:"Overview"}),e.jsx(g,{value:"projects",children:"Projects"}),e.jsx(g,{value:"risks",children:"Risks"})]}),e.jsx(j,{value:"overview",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold",children:"Name:"}),e.jsx("div",{children:l.program.name||"Unnamed Program"}),e.jsx("div",{className:"font-semibold mt-2",children:"Description:"}),e.jsx("div",{children:l.program.description||"No description"}),e.jsx("div",{className:"font-semibold mt-2",children:"Manager:"}),e.jsx("div",{children:l.program.manager||"Not assigned"}),e.jsx("div",{className:"font-semibold mt-2",children:"Start Date:"}),e.jsx("div",{children:l.program.startDate||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"End Date:"}),e.jsx("div",{children:l.program.endDate||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Budget:"}),e.jsxs("div",{children:["$",l.program.budget||0]}),e.jsx("div",{className:"font-semibold mt-2",children:"Status:"}),e.jsx("div",{children:l.program.status||"planning"})]})}),e.jsx(j,{value:"projects",children:e.jsx("ul",{className:"space-y-2",children:(l.program.projects||[]).map(s=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-2",children:[e.jsxs("span",{children:[s.name," (",s.status,")"]}),e.jsx(n,{size:"sm",variant:"secondary",children:"View"})]},s.id))})}),e.jsx(j,{value:"risks",children:e.jsx("ul",{className:"space-y-2",children:(l.program.risks||[]).map(s=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-2",children:[e.jsxs("span",{children:[s.title," (",s.status,")"]}),e.jsx(n,{size:"sm",variant:"secondary",children:"View"})]},s.id))})})]}),e.jsx(n,{className:"w-full mt-4",onClick:()=>v({open:!1}),children:"Close"})]})}),c.open&&c.program&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-red-600",children:"Delete Program"}),e.jsxs("p",{className:"mb-4",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-semibold",children:c.program.name||"Unnamed Program"}),"?"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{className:"flex-1",variant:"destructive",onClick:P,children:"Delete"}),e.jsx(n,{className:"flex-1",variant:"secondary",onClick:()=>h({open:!1}),children:"Cancel"})]})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:C.map(s=>e.jsx(q,{program:s},s._id))})]})}export{ee as default};
