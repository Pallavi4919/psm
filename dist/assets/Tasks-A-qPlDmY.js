import{i as _,r as d,a as h,j as e,B as i,D as A,c as R,d as L,e as f,f as N,C as M}from"./index-D0FyutOn.js";import{C as U,a as z,b as F,c as V}from"./card-C7X9d_pw.js";import{T as B,a as I,b as u,c as m}from"./tabs-D8dsfIBp.js";import{P as O}from"./plus-Cy-egXkT.js";import{E as G}from"./ellipsis-C-_JGGLj.js";import{U as J}from"./user-B1A7UbEb.js";import{C as K}from"./clock-DoB2HT0M.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],W=_("link",Q),T=["todo","in-progress","review","completed"],S=["low","medium","high","critical"],k={title:"",description:"",status:"todo",priority:"medium",assignee:"",reporter:"",project:"",startDate:"",dueDate:"",estimatedHours:"",actualHours:"",dependencies:"",tags:""};function te(){const[H,j]=d.useState(!1),[p,g]=d.useState({open:!1}),[l,b]=d.useState({open:!1}),[c,v]=d.useState({open:!1}),[t,r]=d.useState(k),[n,x]=d.useState([]);d.useEffect(()=>{h.get("/tasks").then(s=>x(s)).catch(console.error)},[]);const q=async()=>{try{const s=await h.post("/tasks",t);x(a=>[...a,s]),r(k),j(!1)}catch{alert("Failed to create task")}},E=async()=>{try{if(!p.task)return;await h.put(),x(s=>s.map(a=>a._id===p.task._id?{...a,...t}:a)),g({open:!1})}catch{alert("Failed to update task")}},P=async()=>{try{if(!c.task)return;await h.delete(),x(s=>s.filter(a=>a._id!==c.task._id)),v({open:!1})}catch{alert("Failed to delete task")}},o=({task:s})=>e.jsxs(U,{children:[e.jsx(z,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-lg",children:s.title||"Untitled Task"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description||"No description"})]}),e.jsxs(A,{children:[e.jsx(R,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",children:e.jsx(G,{className:"w-4 h-4"})})}),e.jsxs(L,{align:"end",children:[e.jsx(f,{onClick:()=>b({open:!0,task:s}),children:"View Details"}),e.jsx(f,{onClick:()=>{r({title:s.title||"",description:s.description||"",status:s.status||"todo",priority:s.priority||"medium",assignee:s.assignee||"",reporter:s.reporter||"",project:s.project||"",startDate:s.startDate||"",dueDate:s.dueDate||"",estimatedHours:String(s.estimatedHours||0),actualHours:String(s.actualHours||0),dependencies:s.dependencies||"",tags:s.tags||""}),g({open:!0,task:s})},children:"Edit Task"}),e.jsx(f,{className:"text-red-600",onClick:()=>v({open:!0,task:s}),children:"Delete"})]})]})]})}),e.jsx(V,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{variant:s.status||"todo",children:(s.status||"todo").replace("-"," ")}),e.jsx(N,{variant:s.priority||"medium",children:s.priority||"medium"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.project||"No project"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:s.assignee||"Unassigned"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Due"," ",s.dueDate?new Date(s.dueDate).toLocaleDateString():"Not set"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[s.actualHours||0,"h / ",s.estimatedHours||0,"h"]})]}),s.dependencies&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:s.dependencies})]})]}),s.tags&&e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags.split(",").map(a=>e.jsx(N,{variant:"outline",className:"text-xs",children:a.trim()},a))}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Reporter: ",s.reporter||"Not assigned"]}),e.jsxs("span",{children:["Started"," ",s.startDate?new Date(s.startDate).toLocaleDateString():"Not set"]})]})})]})})]}),w=(n||[]).filter(s=>s.status==="todo"),y=(n||[]).filter(s=>s.status==="in-progress"),C=(n||[]).filter(s=>s.status==="review"),D=(n||[]).filter(s=>s.status==="completed");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tasks"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage tasks across all projects"})]}),e.jsxs(i,{onClick:()=>j(!0),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"New Task"]})]}),H&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Task"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),q()},className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Title",value:t.title,onChange:s=>r(a=>({...a,title:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Description",value:t.description,onChange:s=>r(a=>({...a,description:s.target.value})),required:!0}),e.jsx("select",{className:"w-full border rounded p-2",value:t.project,onChange:s=>r(a=>({...a,project:s.target.value})),required:!0,"aria-label":"Project",children:e.jsx("option",{value:"",children:"Select Project"})}),e.jsx("select",{className:"w-full border rounded p-2",value:t.assignee,onChange:s=>r(a=>({...a,assignee:s.target.value})),required:!0,"aria-label":"Assignee",children:e.jsx("option",{value:"",children:"Select Assignee"})}),e.jsx("select",{className:"w-full border rounded p-2",value:t.reporter,onChange:s=>r(a=>({...a,reporter:s.target.value})),required:!0,"aria-label":"Reporter",children:e.jsx("option",{value:"",children:"Select Reporter"})}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Start Date",value:t.startDate,onChange:s=>r(a=>({...a,startDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Due Date",value:t.dueDate,onChange:s=>r(a=>({...a,dueDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Estimated Hours",value:t.estimatedHours,onChange:s=>r(a=>({...a,estimatedHours:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Actual Hours",value:t.actualHours,onChange:s=>r(a=>({...a,actualHours:s.target.value}))}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Dependencies (comma separated)",value:t.dependencies,onChange:s=>r(a=>({...a,dependencies:s.target.value}))}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Tags (comma separated)",value:t.tags,onChange:s=>r(a=>({...a,tags:s.target.value}))}),e.jsx("select",{className:"w-full border rounded p-2",value:t.status,onChange:s=>r(a=>({...a,status:s.target.value})),required:!0,"aria-label":"Status",children:T.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{className:"w-full border rounded p-2",value:t.priority,onChange:s=>r(a=>({...a,priority:s.target.value})),required:!0,"aria-label":"Priority",children:S.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"submit",className:"flex-1",children:"Create"}),e.jsx(i,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>j(!1),children:"Cancel"})]})]})]})}),p.open&&p.task&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Task"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),E()},className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Title",value:t.title,onChange:s=>r(a=>({...a,title:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Description",value:t.description,onChange:s=>r(a=>({...a,description:s.target.value})),required:!0}),e.jsx("select",{className:"w-full border rounded p-2",value:t.project,onChange:s=>r(a=>({...a,project:s.target.value})),required:!0,"aria-label":"Project",children:e.jsx("option",{value:"",children:"Select Project"})}),e.jsx("select",{className:"w-full border rounded p-2",value:t.assignee,onChange:s=>r(a=>({...a,assignee:s.target.value})),required:!0,"aria-label":"Assignee",children:e.jsx("option",{value:"",children:"Select Assignee"})}),e.jsx("select",{className:"w-full border rounded p-2",value:t.reporter,onChange:s=>r(a=>({...a,reporter:s.target.value})),required:!0,"aria-label":"Reporter",children:e.jsx("option",{value:"",children:"Select Reporter"})}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Start Date",value:t.startDate,onChange:s=>r(a=>({...a,startDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Due Date",value:t.dueDate,onChange:s=>r(a=>({...a,dueDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Estimated Hours",value:t.estimatedHours,onChange:s=>r(a=>({...a,estimatedHours:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Actual Hours",value:t.actualHours,onChange:s=>r(a=>({...a,actualHours:s.target.value}))}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Dependencies (comma separated)",value:t.dependencies,onChange:s=>r(a=>({...a,dependencies:s.target.value}))}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Tags (comma separated)",value:t.tags,onChange:s=>r(a=>({...a,tags:s.target.value}))}),e.jsx("select",{className:"w-full border rounded p-2",value:t.status,onChange:s=>r(a=>({...a,status:s.target.value})),required:!0,"aria-label":"Status",children:T.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{className:"w-full border rounded p-2",value:t.priority,onChange:s=>r(a=>({...a,priority:s.target.value})),required:!0,"aria-label":"Priority",children:S.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"submit",className:"flex-1",children:"Save"}),e.jsx(i,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>g({open:!1}),children:"Cancel"})]})]})]})}),l.open&&l.task&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Task Details"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold",children:"Title:"}),e.jsx("div",{children:l.task.title||"Untitled Task"}),e.jsx("div",{className:"font-semibold mt-2",children:"Description:"}),e.jsx("div",{children:l.task.description||"No description"}),e.jsx("div",{className:"font-semibold mt-2",children:"Project:"}),e.jsx("div",{children:l.task.project||"No project"}),e.jsx("div",{className:"font-semibold mt-2",children:"Assignee:"}),e.jsx("div",{children:l.task.assignee||"Unassigned"}),e.jsx("div",{className:"font-semibold mt-2",children:"Reporter:"}),e.jsx("div",{children:l.task.reporter||"Not assigned"}),e.jsx("div",{className:"font-semibold mt-2",children:"Start Date:"}),e.jsx("div",{children:l.task.startDate||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Due Date:"}),e.jsx("div",{children:l.task.dueDate||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Estimated Hours:"}),e.jsx("div",{children:l.task.estimatedHours||0}),e.jsx("div",{className:"font-semibold mt-2",children:"Actual Hours:"}),e.jsx("div",{children:l.task.actualHours||0}),e.jsx("div",{className:"font-semibold mt-2",children:"Status:"}),e.jsx("div",{children:l.task.status||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Priority:"}),e.jsx("div",{children:l.task.priority||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Dependencies:"}),e.jsx("div",{children:l.task.dependencies||"None"}),e.jsx("div",{className:"font-semibold mt-2",children:"Tags:"}),e.jsx("div",{children:l.task.tags||"None"})]}),e.jsx(i,{className:"w-full",onClick:()=>b({open:!1}),children:"Close"})]})}),c.open&&c.task&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-red-600",children:"Delete Task"}),e.jsxs("p",{className:"mb-4",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-semibold",children:c.task.title||"this task"}),"?"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"flex-1",variant:"destructive",onClick:P,children:"Delete"}),e.jsx(i,{className:"flex-1",variant:"secondary",onClick:()=>v({open:!1}),children:"Cancel"})]})]})}),e.jsxs(B,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(I,{children:[e.jsxs(u,{value:"all",children:["All Tasks (",n.length,")"]}),e.jsxs(u,{value:"todo",children:["To Do (",w.length,")"]}),e.jsxs(u,{value:"in-progress",children:["In Progress (",y.length,")"]}),e.jsxs(u,{value:"review",children:["Review (",C.length,")"]}),e.jsxs(u,{value:"completed",children:["Completed (",D.length,")"]})]}),e.jsx(m,{value:"all",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:(n||[]).map(s=>e.jsx(o,{task:s},s._id))})}),e.jsx(m,{value:"todo",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:w.map(s=>e.jsx(o,{task:s},s._id))})}),e.jsx(m,{value:"in-progress",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:y.map(s=>e.jsx(o,{task:s},s._id))})}),e.jsx(m,{value:"review",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:C.map(s=>e.jsx(o,{task:s},s._id))})}),e.jsx(m,{value:"completed",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:D.map(s=>e.jsx(o,{task:s},s._id))})})]})]})}export{te as default};
