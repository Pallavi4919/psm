import{i as S,r,a as g,j as e,B as l,g as z,f as P,I as n}from"./index-D0FyutOn.js";import{C as i,a as x,b as m,c as u}from"./card-C7X9d_pw.js";import{P as M}from"./progress-l33qeSLu.js";import{T as F,a as H,b as N,c as v}from"./tabs-D8dsfIBp.js";import{P as C}from"./plus-Cy-egXkT.js";import{D as B}from"./download-BKErva0v.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],V=S("trending-down",O);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],G=S("trending-up",q);function Z(){const[h,E]=r.useState([]),[D,k]=r.useState([]),[A,L]=r.useState(!0),[T,j]=r.useState(!1),[_,p]=r.useState(!1),[t,d]=r.useState({name:"",amount:0,category:"",startDate:"",endDate:""}),[a,c]=r.useState({description:"",amount:0,category:"",date:"",budgetId:""});r.useEffect(()=>{f(),b()},[]);const f=async()=>{try{const s=await g.get("/budgets");E(s)}catch(s){console.error("Error fetching budgets:",s)}},b=async()=>{try{const s=await g.get("/expenses");k(s)}catch(s){console.error("Error fetching expenses:",s)}finally{L(!1)}},I=async()=>{try{await g.post("/budgets",t),d({name:"",amount:0,category:"",startDate:"",endDate:""}),j(!1),f()}catch(s){console.error("Error adding budget:",s)}},R=async()=>{try{await g.post("/expenses",a),c({description:"",amount:0,category:"",date:"",budgetId:""}),p(!1),b(),f()}catch(s){console.error("Error adding expense:",s)}},y=(h||[]).reduce((s,o)=>s+(o.amount||0),0),w=(h||[]).reduce((s,o)=>s+(o.spent||0),0),$=y-w,U=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return A?e.jsx("div",{className:"text-center py-12",children:"Loading..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Budget Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage project budgets"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(l,{onClick:()=>j(!0),children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Add Budget"]}),e.jsxs(l,{onClick:()=>p(!0),variant:"outline",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Add Expense"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(i,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Budget"}),e.jsx(z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",y.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allocated budget"})]})]}),e.jsxs(i,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Total Spent"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",w.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expenses incurred"})]})]}),e.jsxs(i,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Remaining"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",$.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available budget"})]})]})]}),e.jsxs(F,{defaultValue:"budgets",className:"space-y-4",children:[e.jsxs(H,{children:[e.jsx(N,{value:"budgets",children:"Budgets"}),e.jsx(N,{value:"expenses",children:"Expenses"}),e.jsx(N,{value:"reports",children:"Reports"})]}),e.jsx(v,{value:"budgets",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(x,{children:e.jsx(m,{children:"Budget Overview"})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:(h||[]).map(s=>{const o=s.amount>0?s.spent/s.amount*100:0;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name||"Unnamed Budget"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.category||"Uncategorized"})]}),e.jsx(P,{className:U(s.status||"active"),children:s.status||"active"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm",children:["$",(s.spent||0).toLocaleString()," / $",(s.amount||0).toLocaleString()]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[o.toFixed(1),"%"]})]}),e.jsx(M,{value:o,className:"mb-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Start:"," ",s.startDate?new Date(s.startDate).toLocaleDateString():"Not set"]}),e.jsxs("span",{children:["End:"," ",s.endDate?new Date(s.endDate).toLocaleDateString():"Not set"]})]})]},s._id)})})})]})}),e.jsx(v,{value:"expenses",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(x,{children:e.jsx(m,{children:"Recent Expenses"})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:(D||[]).map(s=>e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.description||"No description"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.category||"Uncategorized"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["$",(s.amount||0).toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.date?new Date(s.date).toLocaleDateString():"Unknown date"})]})]},s._id))})})]})}),e.jsx(v,{value:"reports",className:"space-y-4",children:e.jsxs(i,{children:[e.jsx(x,{children:e.jsx(m,{children:"Budget Reports"})}),e.jsx(u,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(l,{variant:"outline",className:"h-20",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Export Budget Report"]}),e.jsxs(l,{variant:"outline",className:"h-20",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Export Expense Report"]})]})})})]})})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-background p-6 rounded-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add New Budget"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(n,{placeholder:"Budget Name",value:t.name,onChange:s=>d({...t,name:s.target.value})}),e.jsx(n,{type:"number",placeholder:"Amount",value:t.amount,onChange:s=>d({...t,amount:Number(s.target.value)})}),e.jsx(n,{placeholder:"Category",value:t.category,onChange:s=>d({...t,category:s.target.value})}),e.jsx(n,{type:"date",value:t.startDate,onChange:s=>d({...t,startDate:s.target.value})}),e.jsx(n,{type:"date",value:t.endDate,onChange:s=>d({...t,endDate:s.target.value})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{onClick:I,className:"flex-1",children:"Add Budget"}),e.jsx(l,{variant:"outline",onClick:()=>j(!1),className:"flex-1",children:"Cancel"})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-background p-6 rounded-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add New Expense"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(n,{placeholder:"Description",value:a.description,onChange:s=>c({...a,description:s.target.value})}),e.jsx(n,{type:"number",placeholder:"Amount",value:a.amount,onChange:s=>c({...a,amount:Number(s.target.value)})}),e.jsx(n,{placeholder:"Category",value:a.category,onChange:s=>c({...a,category:s.target.value})}),e.jsx(n,{type:"date",value:a.date,onChange:s=>c({...a,date:s.target.value})}),e.jsxs("select",{className:"w-full p-2 border rounded",value:a.budgetId,onChange:s=>c({...a,budgetId:s.target.value}),"aria-label":"Select budget for expense",children:[e.jsx("option",{value:"",children:"Select Budget"}),(h||[]).map(s=>e.jsx("option",{value:s._id,children:s.name||"Unnamed Budget"},s._id))]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{onClick:R,className:"flex-1",children:"Add Expense"}),e.jsx(l,{variant:"outline",onClick:()=>p(!1),className:"flex-1",children:"Cancel"})]})]})]})})]})}export{Z as default};
