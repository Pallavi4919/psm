import{r,a as C,j as e,B as i,D as le,c as ie,d as re,e as x,f as U,U as ne,C as de,g as ce,h as oe}from"./index-D0FyutOn.js";import{C as ue,a as me,b as he,c as xe}from"./card-C7X9d_pw.js";import{P as pe}from"./progress-l33qeSLu.js";import{T as $,a as J,b as d,c}from"./tabs-D8dsfIBp.js";import{P as je}from"./plus-Cy-egXkT.js";import{E as ge}from"./ellipsis-C-_JGGLj.js";const p=[{id:"1",name:"Sarah Johnson"},{id:"2",name:"Mike Chen"},{id:"3",name:"Emily Davis"},{id:"4",name:"John Doe"},{id:"5",name:"Jane Smith"}],z=["not-started","in-progress","on-hold","completed","cancelled"],_=["low","medium","high","critical"],O={name:"",description:"",manager:"",startDate:"",endDate:"",budget:"",status:"not-started",priority:"medium"};function Ce(){const[I,D]=r.useState(!1),[m,k]=r.useState({open:!1}),[n,F]=r.useState({open:!1}),[h,S]=r.useState({open:!1}),[t,l]=r.useState(O),[o,j]=r.useState([]),[G,B]=r.useState("overview"),[g,T]=r.useState([]),[v,P]=r.useState([]),[f,M]=r.useState([]),[N,R]=r.useState([]),[A,L]=r.useState(""),[u,b]=r.useState({title:"",assignee:"",dueDate:""}),[w,q]=r.useState({title:"",status:"identified"}),[E,V]=r.useState({name:""});r.useEffect(()=>{C.get("/projects").then(s=>j(s)).catch(console.error)},[]);const H=async()=>{try{const s=await C.post("/projects",t);j(a=>[...a,s]),l(O),D(!1)}catch{alert("Failed to create project")}},K=async()=>{try{if(!m.project)return;await C.put(`/projects/${m.project._id}`,t),j(s=>s.map(a=>a._id===m.project._id?{...a,...t}:a)),k({open:!1})}catch{alert("Failed to update project")}},Q=async()=>{try{if(!h.project)return;await C.delete(),j(s=>s.filter(a=>a._id!==h.project._id)),S({open:!1})}catch{alert("Failed to delete project")}},W=()=>{A&&(T([...g,p.find(s=>s.id===A)]),L(""))},X=s=>{T(g.filter(a=>a.id!==s))},Y=()=>{!u.title||!u.assignee||(P([...v,{...u,id:(v.length+1).toString()}]),b({title:"",assignee:"",dueDate:""}))},Z=s=>{P(v.filter(a=>a.id!==s))},ee=()=>{w.title&&(M([...f,{...w,id:(f.length+1).toString()}]),q({title:"",status:"identified"}))},se=s=>{M(f.filter(a=>a.id!==s))},ae=()=>{E.name&&(R([...N,{...E,id:(N.length+1).toString()}]),V({name:""}))},te=s=>{R(N.filter(a=>a.id!==s))},y=({project:s})=>e.jsxs(ue,{children:[e.jsx(me,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(he,{className:"text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsxs(re,{align:"end",children:[e.jsx(x,{onClick:()=>{F({open:!0,project:s}),B("overview"),T(s.team||[]),P(s.tasks||[]),M(s.risks||[]),R(s.documents||[])},children:"View Details"}),e.jsx(x,{onClick:()=>{l({name:s.name||"",description:s.description||"",manager:s.manager||"",startDate:s.startDate||"",endDate:s.endDate||"",budget:String(s.budget||0),status:s.status||"not-started",priority:s.priority||"medium"}),k({open:!0,project:s})},children:"Edit Project"}),e.jsx(x,{onClick:()=>alert("Timeline coming soon!"),children:"View Timeline"}),e.jsx(x,{onClick:()=>alert("Report coming soon!"),children:"Generate Report"}),e.jsx(x,{className:"text-red-600",onClick:()=>S({open:!0,project:s}),children:"Delete"})]})]})]})}),e.jsx(xe,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{variant:z.includes(s.status)?s.status:"default",children:(s.status||"unknown").replace("-"," ")}),e.jsx(U,{variant:_.includes(s.priority)?s.priority:"default",children:s.priority||"medium"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.progress||0,"% complete"]})]}),e.jsx(pe,{value:s.progress||0,className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[(s.team||[]).length," members"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Due"," ",s.endDate?new Date(s.endDate).toLocaleDateString():"Not set"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["$",(s.spent||0).toLocaleString()," / $",(s.budget||0).toLocaleString()]})]}),(s.risks||[]).length>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-600",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsxs("span",{children:[(s.risks||[]).length," risks"]})]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Manager: ",s.manager||"Not assigned"]}),e.jsxs("span",{children:["Tasks: ",(s.tasks||[]).length]})]})})]})})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track all your projects in one place"})]}),e.jsxs(i,{onClick:()=>D(!0),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),I&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Project"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),H()},className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Name",value:t.name,onChange:s=>l(a=>({...a,name:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Description",value:t.description,onChange:s=>l(a=>({...a,description:s.target.value})),required:!0}),e.jsx("label",{htmlFor:"manager-select",className:"sr-only",children:"Project Manager"}),e.jsxs("select",{id:"manager-select",className:"w-full border rounded p-2",value:t.manager,onChange:s=>l(a=>({...a,manager:s.target.value})),required:!0,"aria-label":"Manager",children:[e.jsx("option",{value:"",children:"Select Manager"}),p.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Start Date",value:t.startDate,onChange:s=>l(a=>({...a,startDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"End Date",value:t.endDate,onChange:s=>l(a=>({...a,endDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Budget",value:t.budget,onChange:s=>l(a=>({...a,budget:s.target.value})),required:!0}),e.jsx("label",{htmlFor:"status-select",className:"sr-only",children:"Status"}),e.jsx("select",{id:"status-select",className:"w-full border rounded p-2",value:t.status,onChange:s=>l(a=>({...a,status:s.target.value})),required:!0,"aria-label":"Status",children:z.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("label",{htmlFor:"priority-select",className:"sr-only",children:"Priority"}),e.jsx("select",{id:"priority-select",className:"w-full border rounded p-2",value:t.priority,onChange:s=>l(a=>({...a,priority:s.target.value})),required:!0,"aria-label":"Priority",children:_.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"submit",className:"flex-1",children:"Create"}),e.jsx(i,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>D(!1),children:"Cancel"})]})]})]})}),m.open&&m.project&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Project"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),K()},className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Name",value:t.name,onChange:s=>l(a=>({...a,name:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",placeholder:"Description",value:t.description,onChange:s=>l(a=>({...a,description:s.target.value})),required:!0}),e.jsxs("select",{className:"w-full border rounded p-2",value:t.manager,onChange:s=>l(a=>({...a,manager:s.target.value})),required:!0,"aria-label":"Manager",children:[e.jsx("option",{value:"",children:"Select Manager"}),p.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"Start Date",value:t.startDate,onChange:s=>l(a=>({...a,startDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"date",placeholder:"End Date",value:t.endDate,onChange:s=>l(a=>({...a,endDate:s.target.value})),required:!0}),e.jsx("input",{className:"w-full border rounded p-2",type:"number",placeholder:"Budget",value:t.budget,onChange:s=>l(a=>({...a,budget:s.target.value})),required:!0}),e.jsx("select",{className:"w-full border rounded p-2",value:t.status,onChange:s=>l(a=>({...a,status:s.target.value})),required:!0,"aria-label":"Status",children:z.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{className:"w-full border rounded p-2",value:t.priority,onChange:s=>l(a=>({...a,priority:s.target.value})),required:!0,"aria-label":"Priority",children:_.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"submit",className:"flex-1",children:"Save"}),e.jsx(i,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>k({open:!1}),children:"Cancel"})]})]})]})}),n.open&&n.project&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Project Details"}),e.jsxs($,{value:G,onValueChange:B,className:"mb-4",children:[e.jsxs(J,{children:[e.jsx(d,{value:"overview",children:"Overview"}),e.jsx(d,{value:"tasks",children:"Tasks"}),e.jsx(d,{value:"team",children:"Team"}),e.jsx(d,{value:"risks",children:"Risks"}),e.jsx(d,{value:"documents",children:"Documents"})]}),e.jsx(c,{value:"overview",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-semibold",children:"Name:"}),e.jsx("div",{children:n.project.name||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Description:"}),e.jsx("div",{children:n.project.description||"No description"}),e.jsx("div",{className:"font-semibold mt-2",children:"Manager:"}),e.jsx("div",{children:n.project.manager||"Not assigned"}),e.jsx("div",{className:"font-semibold mt-2",children:"Start Date:"}),e.jsx("div",{children:n.project.startDate||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"End Date:"}),e.jsx("div",{children:n.project.endDate||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Budget:"}),e.jsxs("div",{children:["$",n.project.budget||0]}),e.jsx("div",{className:"font-semibold mt-2",children:"Status:"}),e.jsx("div",{children:n.project.status||"Not set"}),e.jsx("div",{className:"font-semibold mt-2",children:"Priority:"}),e.jsx("div",{children:n.project.priority||"Not set"})]})}),e.jsxs(c,{value:"tasks",children:[e.jsxs("div",{className:"mb-2 flex gap-2",children:[e.jsx("input",{className:"border rounded p-2 flex-1",placeholder:"Task Title",value:u.title,onChange:s=>b(a=>({...a,title:s.target.value}))}),e.jsxs("select",{className:"border rounded p-2",value:u.assignee,onChange:s=>b(a=>({...a,assignee:s.target.value})),"aria-label":"Assignee",children:[e.jsx("option",{value:"",children:"Assignee"}),p.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]}),e.jsx("input",{className:"border rounded p-2",type:"date",value:u.dueDate,onChange:s=>b(a=>({...a,dueDate:s.target.value})),placeholder:"Due Date","aria-label":"Due Date"}),e.jsx(i,{onClick:Y,children:"Add"})]}),e.jsx("ul",{className:"space-y-2",children:v.map(s=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-2",children:[e.jsxs("span",{children:[s.title," (Assignee: ",s.assignee,", Due:"," ",s.dueDate,")"]}),e.jsx(i,{size:"sm",variant:"destructive",onClick:()=>Z(s.id),children:"Remove"})]},s.id))})]}),e.jsxs(c,{value:"team",children:[e.jsxs("div",{className:"mb-2 flex gap-2",children:[e.jsxs("select",{className:"border rounded p-2 flex-1",value:A,onChange:s=>L(s.target.value),"aria-label":"Team Member",children:[e.jsx("option",{value:"",children:"Select User"}),p.filter(s=>!g.some(a=>a.id===s.id)).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(i,{onClick:W,children:"Add"})]}),e.jsx("ul",{className:"space-y-2",children:g.map(s=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-2",children:[e.jsx("span",{children:s.name}),e.jsx(i,{size:"sm",variant:"destructive",onClick:()=>X(s.id),children:"Remove"})]},s.id))})]}),e.jsxs(c,{value:"risks",children:[e.jsxs("div",{className:"mb-2 flex gap-2",children:[e.jsx("input",{className:"border rounded p-2 flex-1",placeholder:"Risk Title",value:w.title,onChange:s=>q(a=>({...a,title:s.target.value}))}),e.jsxs("select",{className:"border rounded p-2",value:w.status,onChange:s=>q(a=>({...a,status:s.target.value})),"aria-label":"Risk Status",children:[e.jsx("option",{value:"identified",children:"Identified"}),e.jsx("option",{value:"assessed",children:"Assessed"}),e.jsx("option",{value:"mitigated",children:"Mitigated"}),e.jsx("option",{value:"closed",children:"Closed"})]}),e.jsx(i,{onClick:ee,children:"Add"})]}),e.jsx("ul",{className:"space-y-2",children:f.map(s=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-2",children:[e.jsxs("span",{children:[s.title," (",s.status,")"]}),e.jsx(i,{size:"sm",variant:"destructive",onClick:()=>se(s.id),children:"Remove"})]},s.id))})]}),e.jsxs(c,{value:"documents",children:[e.jsxs("div",{className:"mb-2 flex gap-2",children:[e.jsx("input",{className:"border rounded p-2 flex-1",placeholder:"Document Name",value:E.name,onChange:s=>V(a=>({...a,name:s.target.value}))}),e.jsx(i,{onClick:ae,children:"Add"})]}),e.jsx("ul",{className:"space-y-2",children:N.map(s=>e.jsxs("li",{className:"flex items-center justify-between border rounded p-2",children:[e.jsx("span",{children:s.name}),e.jsx(i,{size:"sm",variant:"destructive",onClick:()=>te(s.id),children:"Remove"})]},s.id))})]})]}),e.jsx(i,{className:"w-full mt-4",onClick:()=>F({open:!1}),children:"Close"})]})}),h.open&&h.project&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-red-600",children:"Delete Project"}),e.jsxs("p",{className:"mb-4",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-semibold",children:h.project.name||"this project"}),"?"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{className:"flex-1",variant:"destructive",onClick:Q,children:"Delete"}),e.jsx(i,{className:"flex-1",variant:"secondary",onClick:()=>S({open:!1}),children:"Cancel"})]})]})}),e.jsxs($,{defaultValue:"active",className:"space-y-4",children:[e.jsxs(J,{children:[e.jsxs(d,{value:"active",children:["Active (",o.filter(s=>s.status==="in-progress").length,")"]}),e.jsxs(d,{value:"completed",children:["Completed (",o.filter(s=>s.status==="completed").length,")"]}),e.jsxs(d,{value:"upcoming",children:["Upcoming (",o.filter(s=>s.status==="not-started").length,")"]}),e.jsxs(d,{value:"all",children:["All Projects (",o.length,")"]})]}),e.jsx(c,{value:"active",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.filter(s=>s.status==="in-progress").map(s=>e.jsx(y,{project:s},s._id))})}),e.jsx(c,{value:"completed",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.filter(s=>s.status==="completed").map(s=>e.jsx(y,{project:s},s._id))})}),e.jsx(c,{value:"upcoming",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.filter(s=>s.status==="not-started").map(s=>e.jsx(y,{project:s},s._id))})}),e.jsx(c,{value:"all",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.map(s=>e.jsx(y,{project:s},s._id))})})]})]})}export{Ce as default};
